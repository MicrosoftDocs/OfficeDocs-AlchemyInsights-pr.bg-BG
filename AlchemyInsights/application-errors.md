---
title: Грешки в приложението
ms.author: v-aiyengar
author: AshaIyengar21
manager: dansimp
ms.date: 01/25/2021
ms.audience: Admin
ms.topic: article
ms.service: o365-administration
ROBOTS: NOINDEX, NOFOLLOW
localization_priority: Normal
ms.collection: Adm_O365
ms.custom:
- "9004342"
- "7841"
ms.openlocfilehash: 2ef90b54ce222a06740e05891fabe87b6565cb14
ms.sourcegitcommit: ba3118b7ad5e02756d0e5c2113245090f54370af
ms.translationtype: MT
ms.contentlocale: bg-BG
ms.lasthandoff: 01/25/2021
ms.locfileid: "49984506"
---
# <a name="application-errors"></a>Грешки в приложението

Търсите информация за кодовете на **грешки на AADSTS** , върнати от услугата за маркери за защита на Azure Active Directory (Azure ad) (СТС)? Прочетете [кодове за грешка удостоверяване на AZURE ad и упълномощаване](https://docs.microsoft.com/azure/active-directory/develop/reference-aadsts-error-codes) , за да намерите описания на грешки в AADSTS, корекции и някои предложения за заобиколни решения.

Грешките при удостоверяване могат да се дължат на няколко различни проблема, като повечето от тях генерират грешка 401 или 403. Например следното може да доведе до грешки при удостоверяване:

- Грешен [поток за придобиване на маркер за достъп](https://docs.microsoft.com/azure/active-directory/develop/reference-aadsts-error-codes) 
- Лошо конфигурирани [обхвати на разрешения](https://docs.microsoft.com/azure/active-directory/develop/active-directory-v2-scopes) 
- Липса на [съгласие](https://docs.microsoft.com/azure/active-directory/develop/active-directory-devhowto-multi-tenant-overview#understanding-user-and-admin-consent)

За да коригирате често срещани грешки при удостоверяване, изпробвайте стъпките по-долу, които най-много съвпадат с грешката, която получавате. Повече от един може да се приложи.

**неоторизирана грешка 401: маркерът ви валиден ли е?**

Уверете се, че вашето приложение представя валиден маркер за достъп до Microsoft Graph като част от искането. Тази грешка често означава, че маркерът за достъп може да липсва в заглавката на заявката за удостоверяване на HTTP или че маркерът е невалиден или е изтекъл. Настоятелно ви препоръчваме да използвате [библиотеката за удостоверяване на Microsoft (MSAL)](https://docs.microsoft.com/azure/active-directory/develop/msal-overview) за придобиване на маркери за достъп. Освен това тази грешка може да възникне, ако се опитате да използвате делегиран маркер за достъп, даден за личен акаунт в Microsoft за достъп до API, който поддържа само служебни или учебни акаунти (организационни акаунти).

**403 забранена грешка: избрахте ли подходящия набор от разрешения?**

Проверете дали сте поискали правилния набор от разрешения на базата на API на Microsoft Graph, което се обажда на вашите приложения. Препоръчваните най-малко привилегировани разрешения са предвидени във всички теми за справочен метод на Microsoft Graph API. Освен това тези разрешения трябва да бъдат дадени на приложението от потребител или администратор. Даването на разрешения обикновено се случва чрез страницата за съгласие или чрез даване на разрешения с помощта на ножа за регистрационни приложения на Azure Portal. От острието на **настройките** за приложението щракнете върху **необходими разрешения** и след това щракнете върху **даване на разрешения**.

- [Разрешения на Microsoft Graph](https://docs.microsoft.com/graph/permissions-reference) 
- [Разбиране на разрешенията и съгласието на Azure AD](https://docs.microsoft.com/azure/active-directory/develop/v2-permissions-and-consent) 

**403 забранена грешка: дали вашето приложение е придобило маркер, за да съответства на избраните разрешения?**

Уверете се, че типът на разрешенията, които са заявени или дадени, съответства на типа на маркера за достъп, който приложението придобива. Може да поискате и да отдавате разрешения за приложение, но с помощта на делегиран код за потока от данни, а не от маркерите за потока на клиентските настройки, а да използвате и даване на разрешения, но чрез маркери за потока на идентификационните данни на клиент вместо делегирани маркери.

- [Получаване на достъп от името на потребители и делегирани разрешения](https://docs.microsoft.com/graph/auth_v2_user) 
- [Azure AD v 2.0-OAuth 2,0 код за удостоверяване](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow) 
- [Получаване на достъп без потребител (услуга за Daemon) и разрешения за приложения](https://docs.microsoft.com/graph/auth_v2_service) 
- [Поток на идентификационни данни за клиент на Azure AD v 2.0 – OAuth 2,0](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow) 

**забранена грешка 403: нулиране на парола**

В момента няма разрешения за услугата на Daemon Services за услуги, които позволяват нулиране на потребителски пароли. Тези APIs се поддържат само с помощта на интерактивен делегиран програмен код с подписан администратор.

- [Разрешения на Microsoft Graph](https://docs.microsoft.com/graph/permissions-reference)

**403 е забранено: потребителят има ли достъп и дали има лиценз?**

За потоците с делегиран код Microsoft Graph изчислява дали заявката е позволена на базата на разрешенията, дадени на приложението, и разрешенията, които потребителят е подписал. Като цяло тази грешка показва, че потребителят не е привилегирован достатъчно, за да изпълни заявката или потребителят не е лицензиран за достъп до данните. Само потребители с необходимите разрешения или лицензи могат да направят заявката успешно.

**забраняване на 403: изберете ли правилния Ресурсен API?**

API Services като Microsoft Graph проверяват, че искането за AUD (аудитория) в получения маркер за достъп съвпада със стойността, която очаква за себе си, а ако не е, това води до забранена грешка в 403. Често срещана грешка, която води до тази грешка, се опитва да използва маркер, придобит за API за Azure AD Graph, API на Outlook или API на SharePoint/OneDrive, за да се обадите на Microsoft Graph (или обратно). Уверете се, че ресурсът (или обхватът), на който приложението ви е придобил маркер за съвпада с API, на който се обажда приложението.

**400 Bad заявка или непозволени 403: потребителят спазва ли правилата за условен достъп на организацията си?**

Въз основа на правилата на организацията CA потребителят, който има достъп до ресурсите на Microsoft Graph чрез вашето приложение, може да бъде оспорен за допълнителна информация, която не е налична в маркера за достъп, който първоначално е придобил приложението. В този случай вашето приложение получава 400 с *interaction_required* грешка по време на придобиването на маркер за достъп или 403 с грешка в *insufficient_claims* , когато се обаждате на Microsoft Graph. И в двата случая отговорът на грешката съдържа допълнителна информация, която може да бъде представена на крайната точка за разрешаване, за да оспори потребителя за допълнителна информация (например многофакторно удостоверяване или записване на устройство).

- [Справяне с предизвикателствата при условен достъп с помощта на MSAL ](https://docs.microsoft.com/azure/active-directory/develop/msal-handling-exceptions#conditional-access-and-claims-challenges)
- [Ръководство за програмисти за условен достъп за Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/conditional-access-dev-guide)
